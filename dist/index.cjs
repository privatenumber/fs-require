"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var w=require("vm"),$=require("path"),b=require("module");function v(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var h=v(w),c=v($),j=v(b),m=require;const C=/^[./]/,q=e=>!C.test(e),E=/^(?:node:)?((?:@[\da-z][\w.-]+\/)?[\da-z][\w.-]+)(\/.+)?$/,F=e=>e.match(E)?.slice(1,3),g=m;function O(e,r,n){const[t,i]=F(r)??[];if(t==="fs"){const{fs:s}=n??{};if(s!==!0){const a=s||e;if(!i)return a;if(i==="/promises"&&"promises"in a)return a.promises;throw new Error(`Cannot find module '${r}'`)}}return g(r)}const S=[".js",".json"],B=new RegExp(`(${S.map(e=>e.replace(/\./g,"\\$&")).join("|")})$`),D=(e,r)=>e.lstatSync(r).isDirectory();function x(e,r,n){if(!c.default.isAbsolute(r)&&n&&(r=c.default.resolve(c.default.dirname(n.filename),r)),e.existsSync(r))return D(e,r)?x(e,c.default.join(r,"index.js"),n)||x(e,c.default.join(r,"index.json"),n):{extension:r.match(B)?.[0]??"",filePath:r};for(const t of S){const i=r+t;if(e.existsSync(i))return{extension:t,filePath:i}}return null}function y(e,r,n){const t=x(e,r,n);if(!t)throw new Error(`Cannot find module '${r}'`);return t}const l={"":void 0,".js":void 0,".json":void 0};l[""]=function(e,r,n,t,i){const s=j.default.wrap(r);h.default.runInThisContext(s,{filename:`fs-require://${i}${t}`,lineOffset:0,displayErrors:!0})(e.exports,n(e),e,c.default.basename(t),c.default.dirname(t))},l[".js"]=l[""],l[".json"]=function(e,r){e.exports=JSON.parse(r)};let _=0;const I=(e,r)=>{_+=1;const n=_,t=Object.create(null);function i(s){const a=o=>q(o)?o:y(e,o,s).filePath,d=o=>{if(q(o))return O(e,o,r);const p=y(e,o,s),{filePath:u}=p;let f=t[u];if(!f){f=new j.default(u,s||void 0),f.filename=u;const R=e.readFileSync(u).toString();l[p.extension]?.(f,R,i,u,n),t[u]=f}return f.exports};return d.id=n,d.resolve=a,d.cache=t,d}return i(typeof module>"u"?void 0:module.parent)};exports.createFsRequire=I;
